<!DOCTYPE html>
<html>
<head>
    <title>ClearNext - AI Clarity Conversation</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f7ff;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 90%;
            max-width: 600px;
            margin: 50px auto;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h2 {
            text-align: center;
        }

        #chatBox {
            height: 350px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .ai-message {
            background: #eef1ff;
            padding: 10px;
            margin: 8px 0;
            border-radius: 10px;
        }

        .user-message {
            background: #d6ffd8;
            padding: 10px;
            margin: 8px 0;
            border-radius: 10px;
            text-align: right;
        }

        input {
            width: 75%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }

        button {
            padding: 10px 15px;
            border-radius: 8px;
            border: none;
            background: #4c6ef5;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background: #364fc7;
        }
    </style>
</head>

<body>

<div class="container">
    <h2>ClearNext AI Clarity System</h2>

    <div id="chatBox"></div>

    <input type="text" id="userInput" placeholder="Type your answer..." />
    <button onclick="sendMessage()">Send</button>
</div>

<script>

const questions = [
    "In one sentence, what is currently confusing you the most?",
    "When did this confusion begin?",
    "What are you most afraid might happen if you make the wrong decision?",
    "Does this confusion make you feel stuck, anxious, or overwhelmed?",
    "In the past 7 days, what actions have you taken toward solving this?",
    "If nothing changes, where do you think youâ€™ll be in 3 months?"
];

let currentStep = 0;
let responses = {};

function startConversation() {
    appendMessage("AI", questions[currentStep]);
}

function sendMessage() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();

    if (text === "") return;

    appendMessage("You", text);
    responses["Q" + currentStep] = text;

    input.value = "";
    currentStep++;

    if (currentStep < questions.length) {
        setTimeout(() => {
            appendMessage("AI", questions[currentStep]);
        }, 800);
    } else {
        endConversation();
    }
}

function endConversation() {
    setTimeout(() => {
        appendMessage("AI", "Thank you for being honest.");
    }, 800);

    setTimeout(() => {
        appendMessage("AI", "Your 7-Day Clarity Journey has been initialized.");
    }, 1600);

    setTimeout(() => {
        localStorage.setItem("clarityData", JSON.stringify(responses));
        appendMessage("AI", "Redirecting to Day 1...");
        
        setTimeout(() => {
            window.location.href = "day1.html"; 
        }, 2000);
    }, 2400);
}

function appendMessage(sender, text) {
    const chatBox = document.getElementById("chatBox");
    const messageDiv = document.createElement("div");

    messageDiv.className = sender === "AI" ? "ai-message" : "user-message";
    messageDiv.innerText = text;

    chatBox.appendChild(messageDiv);
    chatBox.scrollTop = chatBox.scrollHeight;
}

window.onload = startConversation;

</script>

</body>
</html>
